!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).i18nextLocalStorageBackend=e()}(this,function(){"use strict";function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}var o=function(){function t(n){e(this,t),this.store=n.store}return i(t,[{key:"setItem",value:function(t,e){if(this.store)try{this.store.setItem(t,e)}catch(t){}}},{key:"getItem",value:function(t,e){if(this.store)try{return this.store.getItem(t,e)}catch(t){}}}]),t}();var r=function(){function n(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,n),this.init(t,i),this.type="backend"}return i(n,[{key:"init",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.services=e,this.options=function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{},o=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),o.forEach(function(n){t(e,n,i[n])})}return e}({},{prefix:"i18next_res_",expirationTime:6048e5,versions:{},store:window.localStorage},this.options,n),this.storage=new o(this.options)}},{key:"read",value:function(t,e,n){var i=(new Date).getTime();if(!this.storage.store)return n(null,null);var o=this.storage.getItem("".concat(this.options.prefix).concat(t,"-").concat(e));return o&&(o=JSON.parse(o)).i18nStamp&&o.i18nStamp+this.options.expirationTime>i&&this.options.versions[t]===o.i18nVersion?(delete o.i18nVersion,delete o.i18nStamp,n(null,o)):n(null,null)}},{key:"save",value:function(t,e,n){this.storage.store&&(n.i18nStamp=(new Date).getTime(),this.options.versions[t]&&(n.i18nVersion=this.options.versions[t]),this.storage.setItem("".concat(this.options.prefix).concat(t,"-").concat(e),JSON.stringify(n)))}}]),n}();return r.type="backend",r});
